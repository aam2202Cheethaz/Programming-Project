<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Paws, Whiskers, and Claws</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #e6944d;
      padding: 40px;
    }

    h1 {
      border: 3px solid #444;
      color: rgb(148, 96, 0);
      display: inline-block;
      padding: 10px 20px;
      border-radius: 12px;
      background: #f1c972;
    }

    .home-btn {
        position: fixed;
        top: 16px;
        right: 16px;
        padding: 8px 16px;
       font-size: 1em;
        border: 2px solid white;
        border-radius: 6px;
        background: #444;
        color: white;
        text-decoration: none;
        cursor: pointer;
        z-index: 1000; /* stays above the canvas/header */
    }
    .home-btn:hover { background: #666; }

    p {
      font-size: 20px;
      color: #333;
    }

    #scoreboard {
      display: block;
      margin: 20px auto 30px auto;
      font-size: 20px;
      font-weight: bold;
      background: #f1c972;
      border: 3px solid #444;
      padding: 10px 10px;
      border-radius: 10px;
      align-items: center;
      max-width: 400px;
      box-sizing: border-box;
    }

    .choices {
      margin-top: 30px;
    }

    button.choice {
      border: 3px solid #333;
      border-radius: 12px;
      margin: 15px;
      padding: 10px;
      cursor: pointer;
      background: white;
      transition: 0.3s;
    }

    button.choice:hover {
      background: #f0e6e6;
      transform: scale(1.05);
    }

    button.choice img {
      width: 100px;
      height: 100px;
      display: block;
      margin: auto;
    }

    button.choice span {
      display: block;
      font-size: 18px;
      margin-top: 8px;
      font-weight: bold;
    }

    #battle {
      margin-top: 40px;
      display: none;
    }

    .fighter {
      display: inline-block;
      margin: 0 40px;
      position: relative;
    }

    .fighter img {
      width: 150px;
      height: 150px;
    }

    /* Fix: bounce + tilt together */
    .tilt-left.bounce {
      animation: bounce-left 0.6s infinite alternate;
    }

    .tilt-right.bounce {
      animation: bounce-right 0.6s infinite alternate;
    }

    .flipped img {
        transform: scaleX(-1);
    }

    @keyframes bounce-left {
      from { transform: rotate(15deg) translateY(0); }
      to   { transform: rotate(15deg) translateY(-20px); }
    }

    @keyframes bounce-right {
      from { transform: rotate(-15deg) translateY(0); }
      to   { transform: rotate(-15deg) translateY(-20px); }
    }

    @keyframes bounce-center {
      from { transform: translateY(0); }
      to   { transform: translateY(-20px); }
    }

    .bounce-center {
      animation: bounce-center 0.6s infinite alternate;
    }

    #result {
      margin-top: 20px;
      font-size: 24px;
      font-weight: bold;
    }

    #reset {
      margin-top: 20px;
      display: none;
      padding: 12px 20px;
      font-size: 18px;
      border-radius: 10px;
      border: 2px solid #333;
      cursor: pointer;
      background: white;
    }

    #reset:hover {
      background: #ddd;
    }

  </style>
</head>
<body>
  <h1>Paws, Whiskers, and Claws</h1>

  <a class="home-btn" href="../index.html" aria-label="Go to homepage">Home</a>

  <p>Paws beat Claws, Claws beat Whiskers, and Whiskers beat Paws. <br>
    Choose your cat's weapon and battle the computer!</p>

  <div id="scoreboard">
    Wins: <span id="wins">0</span> | 
    Losses: <span id="losses">0</span> | 
    Ties: <span id="ties">0</span>
  </div>

  <div class="choices" id="choices">
    <button class="choice" onclick="play('paws')">
      <img src="Images/Cat_Paws.png" alt="Paws">
      <span>Paws</span>
    </button>
    <button class="choice" onclick="play('whiskers')">
      <img src="Images/Cat_Whiskers.png" alt="Whiskers">
      <span>Whiskers</span>
    </button>
    <button class="choice" onclick="play('claws')">
      <img src="Images/Cat_Claws.png" alt="Claws">
      <span>Claws</span>
    </button>
  </div>

  <div id="battle"></div>
  <div id="result"></div>
  <button id="reset" onclick="resetGame()">Try Again</button>

  <script>
    let wins = 0, losses = 0, ties = 0;

    function play(userChoice) {
      const choices = ["paws", "whiskers", "claws"];
      const computerChoice = choices[Math.floor(Math.random() * choices.length)];

      // Hide choice buttons
      document.getElementById("choices").style.display = "none";

      const battleDiv = document.getElementById("battle");
      battleDiv.innerHTML = `
        <div class="fighter tilt-left" id="player"><img src="Cat_${capitalize(userChoice)}.png" alt="${userChoice}"></div>
        <div class="fighter tilt-right" id="computer"><img src="Cat_${capitalize(computerChoice)}.png" alt="${computerChoice}"></div>
      `;
      battleDiv.style.display = "block";

      // Decide winner
      let winner = "";
      let resultText = "";
      if (userChoice === computerChoice) {
        winner = "tie";
        resultText = `Both chose ${userChoice}. It's a tie!`;
        ties++;
      } else if (
        (userChoice === "paws" && computerChoice === "claws") ||
        (userChoice === "whiskers" && computerChoice === "paws") ||
        (userChoice === "claws" && computerChoice === "whiskers")
      ) {
        winner = "player";
        resultText = "You win! ðŸŽ‰";
        wins++;
      } else {
        winner = "computer";
        resultText = "You lose! ðŸ˜¿";
        losses++;
      }

        // If player chose claws, add flipped class
        const playerClass = userChoice === "claws" ? "fighter tilt-left flipped" : "fighter tilt-left";

        battleDiv.innerHTML = `
        <div class="${playerClass}" id="player"><img src="Images/Cat_${capitalize(userChoice)}.png" alt="${userChoice}"></div>
        <div class="fighter tilt-right" id="computer"><img src="Images/Cat_${capitalize(computerChoice)}.png" alt="${computerChoice}"></div>
        `;

      // Animate fight
      const player = document.getElementById("player");
      const computer = document.getElementById("computer");
      player.classList.add("bounce");
      computer.classList.add("bounce");

      setTimeout(() => {
        if (winner === "player") {
          computer.style.display = "none";
          player.classList.remove("tilt-left", "bounce");
          player.classList.add("bounce-center");
          player.style.margin = "0 auto";
        } else if (winner === "computer") {
          player.style.display = "none";
          computer.classList.remove("tilt-right", "bounce");
          computer.classList.add("bounce-center");
          computer.style.margin = "0 auto";
        } else { // tie
          player.classList.remove("tilt-left", "bounce");
          computer.classList.remove("tilt-right", "bounce");
          player.classList.add("bounce-center");
          computer.classList.add("bounce-center");
        }
        document.getElementById("result").innerText = resultText;
        updateScoreboard();
        document.getElementById("reset").style.display = "inline-block";
      }, 2000);
    }

    function resetGame() {
      document.getElementById("choices").style.display = "block";
      document.getElementById("battle").style.display = "none";
      document.getElementById("battle").innerHTML = "";
      document.getElementById("result").innerText = "";
      document.getElementById("reset").style.display = "none";
    }

    function updateScoreboard() {
      document.getElementById("wins").innerText = wins;
      document.getElementById("losses").innerText = losses;
      document.getElementById("ties").innerText = ties;
    }

    function capitalize(word) {
      return word.charAt(0).toUpperCase() + word.slice(1);
    }
  </script>
</body>
</html>